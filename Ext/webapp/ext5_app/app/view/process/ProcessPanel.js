/*
 * File: app/view/role/RoleMangerPanel.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Evcorp.view.process.ProcessPanel', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.processpanel',

    requires: [
        'Evcorp.view.process.ProcessPanelViewController',
        'Evcorp.view.process.ProcessPanelViewModel',
        'Ext.grid.Panel',
        'Ext.tab.Panel',
        'Ext.grid.column.Column',
        'Ext.grid.View',
        'Ext.toolbar.Toolbar',
        'Ext.button.Button',
        'Ext.toolbar.Fill',
        'Ext.form.Panel',
        'Ext.form.field.ComboBox'
    ],
    
    controller:'processpanelc',
    viewModel: {
        type: 'processpanelvm'
    },
    referenceHolder: true,
    itemId:'ProcessPanel',
    closable: true,
	layout: {
		type: 'border',
		align: 'stretch'
	},
	height: "100%",
	items: [{
		region: "center",
		flex: 1,
		split: true,
		height: "100%",
		xtype: "tabpanel",
		activeTab: 0,
		plain: true, //True表示tab候选栏上没有背景图片（默认为false）
		enableTabScroll: true, //选项卡过多时，允许滚动
		defaults: {
			autoScroll: true
		},
		items: [{
				xtype: 'panel',
				title: "我发起",
				//height: "100%,
				layout: {
					type: 'vbox',
					align: 'center'
				},
				width: "100%",
				items: [{
					xtype: 'panel',
					layout: {
				        type: 'vbox',
				        align: 'stretch'
				    },
					width: "100%",
					flex: 1,
					autoScroll: true,
					title: '<div align="center">我发起的流程</div>',
					border: false,
					items: [{
						xtype: "gridpanel",
						//title: '<div align="center">我发起的流程</div>',
						flex: 1,
						//width:'100%',
						
						border: false,
						selModel: {
							selType: 'checkboxmodel',
							mode: 'simple'
						}, //
						reference: 'myStartedProcessGrid',
						bind: '{myStartedProcess}',
						listeners : {
							select : 'onMyStartedProcessSelected'
						},
						plugins: 'gridfilters',
						columns: [{
							xtype: 'gridcolumn',
							align:"center",
							dataIndex: 'processInstanceId',
							text: '流程编号',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							dataIndex: 'processInstanceName',
							text: '流程名称',
							width:150,
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'businessKey',
							text: '单据编号',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'businessTypeName',
							text: '单据类型',
							filter: 'string'
						}, {
							xtype : 'hidden',
							dataIndex:'businessType'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'startTime',
							text: '发起时间',
							filter: 'date',
							width:200,
							renderer: function(value) {
								if(value == null) {
									return "";
								} else {
									return Ext.Date.format(new Date(value), 'Y-m-d H:i:s');
								}
							}
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'startUserId',
							text: '发起人',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'taskName',
							text: '当前节点',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'assignee',
							text: '当前处理人',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'candidate',
							text: '候选人/组',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'taskId',
							text: '任务ID',
							filter: 'number'
						}],
						bbar: [{
							xtype: 'pagingtoolbar',
							dock: 'bottom',
							bind: {
								store: '{myStartedProcess}'
							},
							displayInfo: true,
							displayMsg: '显示 {0} - {1}条记录，总共 {2}条记录',
							emptyMsg: '暂无数据',
							beforePageText: '页数',
							afterPageText: '总共{0}页',
							firstText: '第一页',
							prevText: '上一页',
							nextText: '下一页',
							lastText: '最后一页',
							width: '100%',
							emptyMsg: '没有记录'
						}]
					}]
				}, ]

			}, {
				xtype: 'panel',
				title: '我参与',
				width: "100%",
				layout: {
			        type: 'vbox',
			        align: 'stretch'
			    },
				items: [{
					flex: 1,
					xtype: "panel",
					layout: {
				        type: 'vbox',
				        align: 'stretch'
				    },
					title: '<div align="center">我参与的流程</div>',
					width:'100%',
					autoScroll: true,
					items: [{
						xtype: "gridpanel",
						border:false,
						flex: 1,
						selModel: {
							selType: 'checkboxmodel',
							mode: 'simple'
						}, //
						bind: '{myInvovledProcess}',
						reference: 'myInvovledProcessGrid',
						listeners : {
							select : 'onMyInvovledProcessSelected'
						},
						plugins: 'gridfilters',
						columns: [{
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'processInstanceId',
							text: '流程编号',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'processInstanceName',
							text: '流程名称',
							filter: 'string',
							width:150,
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'businessKey',
							text: '单据编号',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'businessTypeName',
							text: '单据类型',
							filter: 'string'
						}, {
							xtype : 'hidden',
							dataIndex:'businessType'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'startTime',
							text: '发起时间',
							filter: 'date',
							width:200,
							renderer: function(value) {
								if(value == null) {
									return "";
								} else {
									return Ext.Date.format(new Date(value), 'Y-m-d H:i:s');
								}
							}
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'startUserId',
							text: '发起人',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'taskName',
							text: '当前节点',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'assignee',
							text: '当前处理人',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",								
							dataIndex: 'candidate',
							text: '候选人/组',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'taskId',
							text: '任务ID',
							filter: 'number'
						}],
						bbar: [{
								xtype: 'pagingtoolbar',
								dock: 'bottom',
								bind: {
									store: '{myInvovledProcess}'
								},
								displayInfo: true,
								displayMsg: '显示 {0} - {1}条记录，总共 {2}条记录',
								emptyMsg: '暂无数据',
								beforePageText: '页数',
								afterPageText: '总共{0}页',
								firstText: '第一页',
								prevText: '上一页',
								nextText: '下一页',
								lastText: '最后一页',
								width: '100%',
								emptyMsg: '没有记录'
							}

						]
					}]

				}]

			}, {
				title: "归档",
				xtype: "panel",
				layout: {
			        type: 'vbox',
			        align: 'stretch'
			    },
				width: "100%",
				autoScroll: true,
				items: [{
					flex:1,
					layout: {
				        type: 'vbox',
				        align: 'stretch'
				    },
					width:'100%',
					xtype: 'panel',
					title: '<div align="center">已归档流程</div>',
					autoScroll:true,
					items: [{
						flex: 1,
						xtype: "gridpanel",
						//width:'120%',
						border:false,
						//title: '<div align="center">已归档流程</div>',
						selModel: {
							selType: 'checkboxmodel',
							mode: 'simple'
						}, //
						bind: '{myFinishedProcess}',
						reference: 'myFinishedProcessGrid',
						listeners : {
							select : 'onMyFinishedProcessSelected'
						},
						plugins: 'gridfilters',
						columns: [{
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'processInstanceId',
							text: '流程编号',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'processInstanceName',
							text: '流程名称',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'businessKey',
							text: '单据编号',
							filter: 'string'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'businessTypeName',
							text: '单据类型',
							filter: 'string'
						}, {
							xtype : 'hidden',
							dataIndex:'businessType'
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'startTime',
							text: '发起时间',
							filter: 'date',
							width:200,
							renderer: function(value) {
								if(value == null) {
									return "";
								} else {
									return Ext.Date.format(new Date(value), 'Y-m-d H:i:s');
								}
							}
						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'startUserId',
							text: '发起人',
							filter: 'string'

						}, {
							xtype: 'gridcolumn',
							align:"center",
							
							dataIndex: 'endTime',
							text: '流程完成时间',
							filter: 'date',
							width:200,
							renderer: function(value) {
								if(value == null) {
									return "";
								} else {
									return Ext.Date.format(new Date(value), 'Y-m-d H:i:s');
								}
							}
						},{
							xtype: 'gridcolumn',
							align:"center",
							dataIndex: 'deleteReason',
							itemId:'deleteReasonGridId',
							text: '取消原因',
							hidden:true
						}],
						bbar: [{
								xtype: 'pagingtoolbar',
								dock: 'bottom',
								bind: {
									store: '{myFinishedProcess}'
								},
								displayInfo: true,
								displayMsg: '显示 {0} - {1}条记录，总共 {2}条记录',
								emptyMsg: '暂无数据',
								beforePageText: '页数',
								afterPageText: '总共{0}页',
								firstText: '第一页',
								prevText: '上一页',
								nextText: '下一页',
								lastText: '最后一页',
								width: '100%',
								emptyMsg: '没有记录'
							}

						],
						dockedItems: [{
				        	 xtype: 'toolbar',
				        	 dock: 'top',
				        	 items: [
				        	         {
				        	        	 xtype: 'button',
				        	        	 text: '已完成',
				        	        	 iconCls: 'common-icon-serach',
				        	        	 handler: 'onNotDeletedQueryClick'
				        	         },
				        	         {
				        	        	 xtype: 'button',
				        	        	 text: '已取消',
				        	        	 iconCls: 'common-icon-serach',
				        	        	 handler: 'onDeletedQueryClick'
				        	         }
				        	        ]
				         }]
					}]
				}],

			}

		]
	}, {
		region: "east",
		xtype: 'processrightpanel',
		itemId:'processEastPanelId',
		//						border:fal;s
		viewConfig: {
			enableTextSelection: true
		},
		flex: 1

	}]
   
});