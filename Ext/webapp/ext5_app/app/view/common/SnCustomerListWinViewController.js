/*
 * File: app/view/menu/menuPanelViewController.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Evcorp.view.common.SnCustomerListWinViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.snCustomerListWin',
    onQueryClick:function(){
    	var search = this.lookupReference('snCustomerField');
    	var grid = this.lookupReference('snCustomerGrid');
    	var extraParams = {
			cusName : search.getValue()
		};
    	var store = grid.getStore();
    	store.on("beforeload", function(store, operation, eOpts) {
			Ext.apply(store.proxy.extraParams, extraParams);
		});
    	store.loadPage(1, { "start" : 0, "limit" : 20 });
    },
    onSnCustomerSelect:function(){
    	var grid = this.lookupReference('snCustomerGrid');
		  var win = this.getView();
		  var seletedGird = grid.getSelectionModel().getSelection();
			if (seletedGird.length == 0) {
				Ext.Msg.alert("提示", '请选择一条记录');
				return;
			} else{
				var cusCode=seletedGird[0].data.cusCode;
				var cusShortName=seletedGird[0].data.cusShortName;
				var contactPersonName=seletedGird[0].data.contactPersonName;
				var contactPersonPhone=seletedGird[0].data.contactPersonPhone;
				var cusCodeText = Ext.ComponentQuery.query('KAsubmitEditWin #snCustomerCodeItemId')[0];
				cusCodeText.setValue(cusCode);
				var cusShortNameText = Ext.ComponentQuery.query('KAsubmitEditWin #snCustomerNameItemId')[0];
				cusShortNameText.setValue(cusShortName);
				
				var snCustomerContactUserNameText = Ext.ComponentQuery.query('KAsubmitEditWin #snCustomerContactUserNameItemId')[0];
				snCustomerContactUserNameText.setValue(contactPersonName);
				var snCustomerContactUserPhoneText = Ext.ComponentQuery.query('KAsubmitEditWin #snCustomerContactUserPhoneItemId')[0];
				snCustomerContactUserPhoneText.setValue(contactPersonPhone);
			}
			win.close();
    },
});
