/*
 * File: app/view/menu/menuPanelViewController.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Evcorp.view.common.UploadAttachmentWinViewController', {
    extend: 'Ext.app.ViewController',
    alias: 'controller.UploadAttachmentWin',
    initWindow:function(){
    	var win = this.getView();
    	var businessKey = win.businessKey; 
    	var businessType = win.businessType; // 附件业务实体类型：如：合同
    	var businessTypeName = win.businessTypeName; 
		
		var uploadAttachmentPanel = win.down('uploadAttachmentPanel');
		if(uploadAttachmentPanel!=null){
			var attachmentStore = uploadAttachmentPanel.getViewModel().getStore('attachmentStore');
			if(attachmentStore!=null){
				attachmentStore.load({params:{bizEntityCode:businessKey,bizEntityType:businessType}});
			}
			var typeStore = uploadAttachmentPanel.getViewModel().getStore('attachmentTypeStore');
	    	typeStore.load({params:{type:businessType}});
	    	var form = uploadAttachmentPanel.down('form');
	    	if(form!=null){
	    		form.getForm().setValues({businessKey:businessKey,businessType:businessType,businessTypeName:businessTypeName});
	    	}
		}
    }
});
