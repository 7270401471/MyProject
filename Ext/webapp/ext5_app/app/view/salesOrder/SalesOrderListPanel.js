/*
 * File: app/view/role/RoleMangerPanel.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Evcorp.view.salesOrder.SalesOrderListPanel',
		{
			extend : 'Ext.panel.Panel',
			alias : 'widget.salesOrderListPanel',
			requires : [ 'Evcorp.view.salesOrder.SalesOrderListPanelViewController',
					'Evcorp.view.salesOrder.SalesOrderListPanelViewModel',
					'Ext.grid.plugin.CellEditing',
					'Ext.grid.Panel', 'Ext.tab.Panel',
					'Ext.grid.column.Column', 'Ext.grid.View',
					'Ext.toolbar.Toolbar', 'Ext.button.Button',
					'Ext.toolbar.Fill', 'Ext.form.Panel',
					'Ext.grid.column.Check',
					'Ext.form.field.ComboBox', 'Ext.form.DateField' ],

			controller : 'salesOrderListPanel',
			viewModel : {
				type : 'salesOrderListPanel'
			},
			referenceHolder : true,
			itemId : 'salesOrderListPanel',
			closable : true,
			layout : {
				type : 'border',
				align : 'stretch'
			},
			border : false,
			items : [ {
				xtype : 'container',
				flex : 1,
				region:'center',
				layout : {
					type : 'vbox',
					align : 'stretch'
				},
				buttonAlign:'center',
				items : [ 				          
				          {
					xtype : 'form',
					heigth : 100,
					bodyPadding : 10,
					reference : 'salesOrderQueryForm',
					layout : {
						type : 'hbox',
						align : 'stretch'
					},
					buttonAlign:'center',
					items : [ {
						xtype : 'container',
						defaults : {
							width : 250,
							labelWidth:100,
							margin:'10 10'
						},
						items : [ {
							xtype : 'textfield',
							name : 'code',
							fieldLabel : '订单编号'
						},{
							xtype : 'textfield',
							name : 'productName',
							fieldLabel : '产品名称'
						},{
							xtype : 'combobox',
							fieldLabel : '订单状态',
							name : 'status',
							itemId : "status",
							valueField : "code",
							displayField : "nameCn",
							queryModel : 'local',
							editable : false,
							store : Ext.create('Ext.data.Store', {
										autoLoad : true,
										fields : [ 'code', 'nameCn' ],
										proxy : {
											type : 'direct',
											directFn : chooseOptionContro.getChooseOption,
											extraParams : {
												type : 'SALES_ORDER_STATUS'
											}
										}
									}),
						}]
					}, {
						xtype : 'container',
						defaults : {
							width : 250,
							labelWidth:100,
							margin:'10 10'
						},
						items : [ {
							xtype : 'textfield',
							name : 'cusName',
							fieldLabel : '客户姓名'
						},{
							xtype : 'textfield',
							name : 'vin',
							fieldLabel : 'VIN'
						}]
					},{
						xtype : 'container',
						defaults : {
							width : 250,
							labelWidth:100,
							margin:'10 10'
						},
						items : [ {
							xtype : 'textfield',
							name : 'cusContact',
							fieldLabel : '客户联系方式'
						},{
							xtype: 'datefield',
							name : 'createDateFrom',
							fieldLabel : '创建日期',
							editable:false,
        	     			format: 'Y-m-d'
        	     		}]
					},{
						xtype : 'container',
						defaults : {
							width : 250,
							labelWidth:100,
							margin:'10 10'
						},
						items : [{
							xtype : 'textfield',
							name : 'saleExecutive',
							fieldLabel : '执行销售'
						}, {
							xtype: 'datefield',
							name : 'createDateTo',
							fieldLabel : '至',
							editable:false,
        	     			format: 'Y-m-d'
        	     		}]
					}],
					dockedItems : [ {
						xtype : 'toolbar',
						flex : 1,
						dock : 'bottom',
						buttonAlign:'left',
						items : [ 
						  {
							xtype : 'button',
							text : '新建订单',
							iconCls : 'nu-order_add',
							handler : 'onSalesOrderAddClick'
						}, {
							xtype : 'button',
							text : '修改订单',
							iconCls : 'nu-order_edit',
							handler : 'onSalesOrderUpdClick'
						}, {
							xtype : 'button',
							text : '查看订单',
							iconCls : 'nu-order_view',
							handler : 'onSalesOrderViewClick'
						}, {
							xtype : 'tbfill'
						},
						{
							xtype : 'button',
							text : '查询',
							iconCls : 'common-icon-serach',
							handler : 'onSalesOrderQueryClick'
						}]
					} ]
				}, {
					flex : 1,
					border : false,
                    viewConfig: { enableTextSelection: true },
					xtype : 'gridpanel',
					width : '100%',
					itemId: 'salesOrderGridId',
					reference: 'salesOrderGrid',
					bind : '{salesOrderListStore}',
					autoScroll : true,
					columns : [ {
						dataIndex: 'id',
						hidden:true
					},{
						text : '订单编号',
						width:150,
						dataIndex : 'code',
						align : 'center'
					}, {
						text : '客户编号',
						width:100,
						dataIndex : 'cusCode',
						align : 'center'

					}, {
						text : '客户姓名',
						width:100,
						dataIndex : 'cusName',
						align : 'center',

					}, {
						text : '客户联系方式',
						width:110,
						dataIndex : 'cusContact',
						align : 'center'
					}, {
						text : '产品编号',
						width:150,
						dataIndex : 'carProductCode',
						align : 'center'

					}, {
						text : '产品名称',
						width:270,
						dataIndex : 'productName',
						align : 'center'
					}, {
						text : '车辆VIN',
						width:180,
						dataIndex : 'vin',
						align : 'center'
					}, {
						text : '执行销售',
						width:100,
						dataIndex : 'saleExecutiveName',
						align : 'center'
					}, {
						text : '订单总金额',
						dataIndex : 'orderAmount',
						xtype: "numbercolumn", 
						format: '0,0.00', 
						align : 'center'
					}, {
						text : '实际销售价',
						dataIndex : 'actualPrice',
						xtype: "numbercolumn", 
						format: '0,0.00', 
						align : 'center'
					}, {
						text : '应收总金额',
						dataIndex : 'arAmount',
						xtype: "numbercolumn", 
						format: '0,0.00', 
						align : 'center'
					}, {
						text : '实收总金额',
						dataIndex : 'recvAmoount',
						xtype: "numbercolumn", 
						format: '0,0.00', 
						align : 'center'
					}, {
						text : '订金',
						dataIndex : 'prepayAmount',
						xtype: "numbercolumn", 
						format: '0,0.00', 
						align : 'center'
					}, {
						text : '订单创建日期',
						dataIndex : 'createDate',
						width:110,
						align : 'center',
						renderer: function(value) {
							if(value == null) {
								return "";
							} else {
								return Ext.Date.format(new Date(value), 'Y-m-d');
							}
						}
					}, {
						text : '合同签订日期',
						dataIndex : 'contractSignedDate',
						width:110,
						align : 'center',
						renderer: function(value) {
							if(value == null) {
								return "";
							} else {
								return Ext.Date.format(new Date(value), 'Y-m-d');
							}
						}
					}, {
						text : '配车日期',
						dataIndex : 'dispatchedDate',
						width:110,
						align : 'center',
						renderer: function(value) {
							if(value == null) {
								return "";
							} else {
								return Ext.Date.format(new Date(value), 'Y-m-d');
							}
						}
					}, {
						text : '是否征信通过',
						width:110,
						dataIndex : 'isCreditAudited',
						align : 'center'
					}, {
						text : '状态',
						width:130,
						dataIndex : 'status',
						align : 'center',
						renderer: function (val){
                        	var gridStore = this.up('panel').down('#status').getStore();
                        	if(val != null && val != ''){
                        		return gridStore.findRecord('code', val).data.nameCn;
                            }else{
                            	return null;
                            }
                        }
					}],
					dockedItems: [ {
      			        xtype: 'pagingtoolbar',
      			        dock: 'bottom',
      			        bind: {
      				        store: '{salesOrderListStore}'
      				    },
      			        displayInfo : true,
      					displayMsg:'显示 {0} - {1}条记录，总共 {2}条记录',
      					emptyMsg:'暂无数据',
      					beforePageText:'页数',
      					afterPageText:'总共{0}页',
      					firstText:'第一页',
      					prevText:'上一页',
      					nextText:'下一页',
      					lastText:'最后一页',
      					width:'100%',
      					emptyMsg : '没有记录'
      			    } ]
				} ]
			}
			]

		});


