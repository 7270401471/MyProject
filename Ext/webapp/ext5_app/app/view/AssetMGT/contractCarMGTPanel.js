/*
 * File: app/view/role/RoleMangerPanel.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext
		.define(
				'Evcorp.view.AssetMGT.contractCarMGTPanel',
				{
					extend : 'Ext.panel.Panel',
					alias : 'widget.contractCarMGTPanel',
					requires : [
							'Evcorp.view.AssetMGT.contractCarMGTPanelViewController',
							'Evcorp.view.AssetMGT.contractCarMGTPanelViewModel',
							'Ext.grid.Panel', 'Ext.tab.Panel',
							'Ext.grid.column.Column', 'Ext.grid.View',
							'Ext.toolbar.Toolbar', 'Ext.button.Button',
							'Ext.toolbar.Fill', 'Ext.form.Panel',
							'Ext.form.field.ComboBox', 'Ext.form.DateField' ],
					controller : 'contractCarMGTPanel',
					viewModel : {
						type : 'contractCarMGTPanel'
					},
					itemId : 'contractCarMGTPanel',
					closable : true,
					collapsible : true,
					referenceHolder : true,
					layout : {
						type : 'vbox',
						align : 'stretch'
					},
					title : '合约车管理',
					items : [
							{
								xtype : 'form',
								autoScroll : false,
								reference : 'conCarMgtGridForm',
								bodyPadding : '10',
								layout : {
									type : 'hbox',
									align : 'stretch'
								},
								items : [ 
										{
											xtype : 'container',
											margin:'5 0',
											items : [
													{
														xtype : 'textfield',
														fieldLabel : '产品名称',
//														readOnly : true,
														labelWidth : 70,
														width : 200,
														itemId:'contractCarMGTProductName',
														name : 'contractCarMGTProductName'
													},
													{
														xtype : 'textfield',
														fieldLabel : '车架号',
														name : 'carFrameNo',
														labelWidth : 70,
														width : 200
													},
													 {
														xtype : 'textfield',
														fieldLabel : '行驶证号',
														name : 'carDriveLicenseNo',
														labelWidth : 70,
														width : 200
													} ]
										},
										{
											xtype : 'container',
											margin:'5 20',
											items : [
													
													{
														xtype : 'textfield',
														fieldLabel : '车牌号',
														name : 'carLicensePlate',
														labelWidth : 70,
														width : 200,
														
													},{
														xtype : 'textfield',
														fieldLabel : '产品code',
														hidden : true,
														itemId:'contractCarMGTProductCode',
														name : 'contractCarCode'
													} ,
													{
														xtype : 'combobox',
														fieldLabel : '合作商',
														name : 'businessPartner',
														itemId : 'businessPartner',
														labelWidth : 70,
														width : 200,
														valueField : 'code',
														editable : false,
														displayField : 'nameCn',
														bind : {
															store : '{businessPartnerType}'
														}
													}]
										},{
											xtype : 'container',
											items : [
													{
														xtype : 'combobox',
														fieldLabel : '状态',
														name : 'status',
														itemId : 'status',
														labelWidth : 70,
														width : 200,
														valueField : 'code',
														editable : false,
														displayField : 'nameCn',
														bind : {
															store : '{carInfoStatus}'
														}
													},
													{
														xtype : 'textfield',
														fieldLabel : 'GPS设备',
														name : 'wirelessNo',
														labelWidth : 70,
														width : 200
													}  ]
										},{
											xtype : 'container',
											margin:'0 20',
											items : [ {
												xtype : 'textfield',
												fieldLabel : '客户姓名',
												name : 'customerName',
												labelWidth : 70,
												width : 200
											}, {
												xtype : 'textfield',
												fieldLabel : '客户手机',
												name : 'customerPhone',
												labelWidth : 70,
												width : 200
											}]
										}],
								dockedItems : [ {
									xtype : 'toolbar',
									flex : 1,
									dock : 'bottom',
									items : [ {
										xtype : "button",
										cls:'btn-success',
										iconCls : 'common-icon-add',
										text : "新建",
										
										listeners : {
											click : 'onMGTadd'
										},
									}, {
										xtype : "button",
										cls:'btn-success',
										cls:'btn-primary',
										text : "修改",
										iconCls : 'nu-order_edit',
										listeners : {
											click : 'onMGTupd'
										},
									}, {
										xtype : "button",
										// cls:'btn-success',
										text : "删除",
										iconCls: 'common-icon-del' ,
										cls:'btn-danger', 
										listeners : {
											click : 'onMGTdel'
										},
									}, {
										xtype : 'tbfill'
									}, {
										xtype : 'button',
										text : '查 询',
										scale : 'small',
										iconCls : 'common-icon-serach',
										handler : 'onQueryCarInfo',
									} ]
								} ]
							},
							{
								flex : 1,
								border : false,
								xtype : 'gridpanel',
								viewConfig: { enableTextSelection: true },
								reference : 'conCarMgtGridRef',
								itemId : 'conCarMgtGrid',
								autoScroll : true,
								bind : '{carInfoGridStore}',
								columns : [
										{
											xtype : 'gridcolumn',
											dataIndex : 'carInfoCode',
											width : 160,
											hidden : false,
											text : '编号'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'contractCarName',
											width : 240,
											hidden : false,
											text : '产品名称'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'carFrameNo',
											minWidth : 160,
											hidden : false,
											text : '车架号（VIN）'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'customerName',
											width : 100,
											hidden : false,
											text : '客户姓名'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'customerPhone',
											width : 100,
											hidden : false,
											text : '客户手机'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'carLicensePlate',
											hidden : false,
											text : '车牌号'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'carDriveLicenseNo',
											hidden : false,
											text : '行驶证号'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'carEngineNo',
											hidden : false,
											text : '发动机号'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'certificate',
											hidden : false,
											text : '合格证'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'initMileage',
											hidden : false,
											text : '初始里程数'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'displacement',
											hidden : false,
											text : '排量'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'status',
											hidden : false,
											text : '状态',
											renderer : function(value) {
												if (value != null) {
													var gridStore = this.up('panel').down('#status').getStore();
													if(gridStore.findRecord('code',value)==null){
														return value;
													}else{
														return gridStore.findRecord('code',value).data.nameCn;;
													}
												}
											}
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'insuranceCompanyName',
											hidden : false,
											text : '保险公司'
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'strongInsuranceStartDate',
											hidden : false,
											width : 140,
											text : '交强险起始日期',
											renderer : function(value) {
												if (value == null) {
													return "";
												} else {
													return Ext.Date.format(
															new Date(value),
															'Y-m-d')
												}
											}
										},
										{
											xtype : 'gridcolumn',
											dataIndex : 'strongInsuranceEndDate',
											hidden : false,
											width : 140,
											text : '交强险终止日期',
											renderer : function(value) {
												if (value == null) {
													return "";
												} else {
													return Ext.Date.format(
															new Date(value),
															'Y-m-d')
												}
											}
										}, {
											xtype : 'gridcolumn',
											dataIndex : 'wirelessNo',
											hidden : false,
											width : 140,
											text : 'GPS无线设备'
										}, {
											xtype : 'gridcolumn',
											dataIndex : 'wiredNo',
											hidden : false,
											width : 140,
											text : 'GPS有线设备'
										},
										 {
											xtype : 'gridcolumn',
											dataIndex : 'businessPartner',
											hidden : false,
											text : '合作商',
											renderer : function(value) {
												if (value != null) {
													var gridStore = this.up(
															'panel').down(
															'#businessPartner')
															.getStore();
													if(gridStore
															.findRecord('code',
																	value)==null){
														return value;
													}else{
														return gridStore
														.findRecord('code',
																value).data.nameCn;
													}
												}else{
				                                	return null;
				                                }
											}
										}],
								bbar : [ {
									xtype : 'pagingtoolbar',
									bind : {
										store : '{carInfoGridStore}'
									},
									displayMsg : '显示 {0} - {1} 条，共计 {2} 条',
									emptyMsg : "没有数据",
									beforePageText : "当前页",
									afterPageText : "共{0}页",
									displayInfo : true,
									width : '100%'
								} ],
							}

					]
				});
