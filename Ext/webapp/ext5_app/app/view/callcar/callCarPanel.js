/*
 * File: app/view/role/RoleMangerPanel.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Evcorp.view.callcar.callCarPanel', {
	extend : 'Ext.panel.Panel',
	alias : 'widget.callCarPanel',
	requires : [ 
		        'Evcorp.view.callcar.callCarPanelViewController',
				'Evcorp.view.callcar.callCarPanelViewModel',
				'Ext.grid.Panel', 'Ext.tab.Panel', 'Ext.grid.column.Column',
				'Ext.grid.View', 'Ext.toolbar.Toolbar', 'Ext.button.Button',
				'Ext.toolbar.Fill', 'Ext.form.Panel', 'Ext.form.field.ComboBox',
				'Ext.form.DateField'
				],

	controller : 'callCarPanel',
	viewModel : {
		type : 'callCarPanel'
	},
	itemId : 'callCarPanel',
	closable : true,
	collapsible : true,
	referenceHolder : true,
	layout : {
		type : 'vbox',
		align : 'stretch'
	},
	
	items : [ 

	          {
	          	/*callcar on*/

	          	xtype:'form',
	          	reference:'callCarDemandSearchForm',
	          	itemId:'callCarDemandSearchFormId',
	          	autoScroll : true,
                bodyPadding:10,
                border:false,
	          	flex:1,
	          	//title:'<div align="center">Call车计划执行单</div>',
	          	items: [{
	          	    xtype:'fieldset',
	          	    columnWidth: 1,
	          	    padding:'10 20',
	          	    margin:'0',
	          	    title: '订单信息',
	          	    collapsible: true,
	          	    defaultType: 'textfield',
	          	    defaults: {anchor: '100%'},
	          	    layout: 'vbox',
	          	    flex:1,
	          	    items :[{
	          	                xtype:'panel',
	          	                layout: 'hbox',
	          	                border:false,
	          	                margin : '0 0 10 0',
	          	                items :[
	          	                            {
	          	                                xtype : 'combobox',
	          	                                fieldLabel : '订单状态',
	          	                                name : 'status',
	          	                                valueField : "code",
												displayField : "nameCn",
	          	                                labelWidth : 80,
	          	                                width : 340,
	          	                                margin : '0 20',
	          	                                mode : 'local ',
	          	                                editable : false,
	          	                                store : Ext.create('Ext.data.Store',{
													fields : [
															'code',
															'nameCn' ],
													proxy : {
														type : 'direct',
														directFn : chooseOptionContro.getChooseOptionWithSelect,
														extraParams : {
															type : 'callCarStatus'
														}
													}
												})
	          	                            },
		          	                          {
												 xtype : 'textfield',
		                                         fieldLabel : '供应商',
		                                         name : 'venderName',
		                                         itemId:'venderNameId',
	                                           labelWidth : 100,
	                                           width:210,
	                                           margin : '0 0 0 20'
                                           },{
                                        	 xtype:'hidden',
                                        	 name:'venderId',
                                        	 itemId:'venerIdid'
                                           },
                                           {
                                              xtype : 'button',
                                              text : '查找',
                                              margin : '0 10',
                                              cls:'nu-btn-nobg',
                                              iconCls: 'common-icon-serach',
                                              width:60,
                                              listeners:{
                                              	click:'onProviderSearch',
                                              },
                                             // handler : function() {},
                                         
                                           }
	          	                        ]
	          	            },{
	          	                xtype:'panel',
	          	                layout: 'hbox',
	          	                margin : '0 0 10 0',
	          	                border:false,
	          	                items :[
	          	                            {   
	          	                                xtype: 'panel',
	          	                                border:false,           
	          	                                width : 340,
	          	                                margin : '0 20',
	          	                                layout:'hbox',
	          	                                items: [{
	          	                                            xtype:'datefield',
	          	                                            width : 190,
	          	                                            labelWidth : 80,
	          	                                            endDateField:'etime',
	          	                                            fieldLabel: '开始时间',
	          	                                            format: 'Y-m-d',
	          	                                            name:'createDateFrom'
	          	                                        },
	          	                                        {
	          	                                            xtype:'datefield',
	          	                                            width : 140,
	          	                                            labelWidth : 20,
	          	                                            margin:'0',
	          	                                            align:'center',
	          	                                            startDateField:'stime',
	          	                                            fieldLabel: '至',
	          	                                            format: 'Y-m-d',
	          	                                            name:'createDateTo',
	          	                                            margin : '0 0 0 10'
	          	                                        }]

	          	                            },
	          	                            {
	          	                                xtype : 'textfield',
	          	                                fieldLabel : '厂家订单编号',
	          	                                name : 'venderOrderNo',
	          	                                labelWidth : 100,
	          	                                width : 280,
	          	                                margin : '0 20'
	          	                            }
	          	                            
	          	                            /*
	          	                            {
	          	                                xtype : 'combobox',
	          	                                fieldLabel : '供应商',
	          	                                name : 'venderId',
	          	                                valueField : "id",
												displayField : "fullName",
	          	                                labelWidth : 100,
	          	                                width : 280,
	          	                                margin : '0 20',
	          	                                mode : 'local ',
	          	                                editable : false,
		          	                              store : Ext.create('Ext.data.Store',{
														fields : [
																'id',
																'fullName' ],
														proxy : {
															type : 'direct',
															directFn : venderContro.findVenderList
														}
													})
	          	                            }*/]
	          	            },{
	          	                xtype:'panel',
	          	                layout: 'hbox',
	          	                margin : '0 0 10 0',
	          	                border:false,
	          	                
	          	                items :[
	          	                            {   
	          	                                xtype: 'panel',
	          	                                border:false,           
	          	                                width : 340,
	          	                                margin : '0 20',
	          	                                layout:'hbox',
	          	                                items: [{
	          	                                            xtype:'datefield',
	          	                                            width : 190,
	          	                                            labelWidth : 80,
	          	                                            endDateField:'etime',
	          	                                            fieldLabel: '提交日期',
	          	                                            format: 'Y-m-d',
	          	                                            name:'submitDateFrom'
	          	                                        },
	          	                                        {
	          	                                            xtype:'datefield',
	          	                                            width : 140,
	          	                                            labelWidth : 20,
	          	                                            align:'center',
	          	                                            startDateField:'stime',
	          	                                            fieldLabel: '至',
	          	                                            format: 'Y-m-d',
	          	                                            name:'submitDateTo',
	          	                                            margin : '0 0 0 10'
	          	                                        }]

	          	                            },{

	          	                                xtype: 'panel',
	          	                                border:false,
	          	                                margin:'0 0 10 0',
	          	                                //columns: 4,
	          	                                items: [
	          	                                {

		          	                                xtype : 'textfield',
		          	                                fieldLabel : '发货单号',
		          	                                name : 'deliverNo',
		          	                                labelWidth : 100,
		          	                                width : 280,
		          	                                margin : '0 20'
		          	                            
	          	                                }]
	          	                            }],
	          	                            dockedItems: [
	          	                                           {
	          	                                             xtype: 'toolbar',
	          	                                             dock: 'bottom',
	          	                                             border:false,
	          	                                             padding:10,
	          	                                             layout: {
	          	                                                 type: 'hbox',
	          	                                                 pack: 'end'
	          	                                             },
	          	                                             items: [
	          	                                                     {
	          	                                                         xtype: 'tbfill'
	          	                                                     },
	          	                                                 {
	          	   	          	                                    xtype: 'button',
	          		          	                                    text: '查 询',
	          		          	                                    scale:'small',
	          		          	                                    iconCls: 'common-icon-serach',
	          		          	                                    margin : '0 10',
	          		          	                                    listeners: {  
	          		          	                                            click: 'searchClick'
	          		          	                                    }
	          		          	                                 }
	          	                                             ]
	          	                                         }
	          	                                     ]
	          	            }
	          	            ]
	          	}, {
	          		xtype:'panel',
	          		layout: {
	                    type: 'vbox',
	                    align: 'stretch'
	                },
	                padding:'10 0',
	          		//autoScroll : true,
	          	    items:[{
	          	    	
	          	    	          	    xtype: 'gridpanel',
	          	    	          	    viewConfig: { enableTextSelection: true },
	          	    	          	    bind:'{callCarDemandStore}',
	          	    	          	    reference:'callCarDemandGrid',
	          	    	          	    itemId:'callCarDemandGridId',
	          	    	          	    buttonAlign:'center',
	          	    	          	    selModel: {
	          	    	          	        selType: 'checkboxmodel',
	          	    	          	        mode: 'SIMPLE'
	          	    	          	    },
		          	    	          	listeners : {
			          	    	  			cellClick  : 'onCallCarDemandSelected'
			          	    	  		},
	          	    	          	    columns: [
	          	    	          	              	{ xtype: 'gridcolumn',hidden:true,dataIndex:'id'},
	          	    	          	              	{ xtype: 'gridcolumn',hidden:true,dataIndex:'createBy'},
	          	    	          	                { xtype: 'gridcolumn', text: '序号', align:'center' , dataIndex: 'index',align:'center', },
	          	    	          	                { xtype: 'gridcolumn',  text: '编号',  dataIndex: 'code', flex:2,align:'center', },
	          	    	          	                { xtype: 'gridcolumn',  text: '供应商', dataIndex: 'venderName',align:'center',
	          	    	          	                	flex:3},
	          	    	          	                { xtype: 'gridcolumn',  text: '生成日期',align:'center' , dataIndex: 'createDate', flex:2,renderer: function(value) {
	          	    									if(value == null) {
	          	    										return "";
	          	    									} else {
	          	    										return Ext.Date.format(new Date(value), 'Y-m-d H:i:s');
	          	    									}
	          	    								}},
	          	    	          	                { xtype: 'gridcolumn',  text: '提交日期', align:'center' , dataIndex: 'submitDate', flex:2,renderer: function(value) {
	          	    									if(value == null) {
	          	    										return "";
	          	    									} else {
	          	    										return Ext.Date.format(new Date(value), 'Y-m-d H:i:s');
	          	    									}
	          	    								}},
	          	    	          	                { xtype: 'gridcolumn',  text: '购车量', align:'center' , dataIndex: 'orderQuantity', flex:1},
	          	    	          	                { xtype: 'gridcolumn',  text: '订单金额',  dataIndex: 'orderAmount', flex:2,align:'center',},
	          	    	          	                { xtype: 'gridcolumn',  text: '厂家订单编号',  dataIndex: 'venderOrderNo', flex:3,align:'center',},
	          	    	          	                { xtype: 'gridcolumn',  text: '发货单号',  dataIndex: 'deliverNo', flex:2,align:'center',},
	          	    	          	                { xtype: 'gridcolumn',  text: '状态', align:'center',  dataIndex: 'statusName', flex:2},
	          	    	          	                {  xtype: 'gridcolumn', text: '操作', align:'center',  dataIndex: 'operate',
	          	    	          	                    renderer:function(value,cellmeta,record){
	          	    	          	                    	if(record.data.status==0){
		          	    	          	                        var returnStr= "<input class='oss-btn btn-primary' type='button' value='编辑'>  <input class='oss-btn btn-danger' type='button' value='删除'>";
		          	    	          	                        return returnStr;
		          	    	          	                    }else{
		          	    	          	                    	return '';
		          	    	          	                    }
	          	    	          	                    } , 
	          	    	          	                   flex:3
	          	    	          	                }
	          	    	          	                ],
	          	    	          	                bbar: [{
	          	    	          	                        xtype: 'pagingtoolbar',
	          	    	          	                        dock: 'bottom',
	          	    	          	                        bind: {
	          	    	          	                            store: '{callCarDemandStore}'
	          	    	          	                        },
	          	    	          	                        displayInfo: true,
	          	    	          	                        displayMsg: '显示 {0} - {1}条记录，总共 {2}条记录',
	          	    	          	                        emptyMsg: '暂无数据',
	          	    	          	                        beforePageText: '页数',
	          	    	          	                        afterPageText: '总共{0}页',
	          	    	          	                        firstText: '第一页',
	          	    	          	                        prevText: '上一页',
	          	    	          	                        nextText: '下一页',
	          	    	          	                        lastText: '最后一页',
	          	    	          	                        width: '100%',
	          	    	          	                        emptyMsg: '没有记录'
	          	    	          	                    }

	          	    	          	                ],
	          	    	          	                buttons : [ {
	          	    	          	                            xtype : "button",
	          	    	          	                            text : "新增",
	          	    	          	                            iconCls : 'common-icon-add' ,
	          	    	          	                            margin : "0 50 0 0",
	          	    	          	                            listeners:{
	          	    	          	                            	click: 'oncallCarClick'
	          	    	          	                            }
	          	    	          	                        }, {
	          	    	          	                            xtype : "button",
	          	    	          	                            text : "提 交",
	          	    	          	                            iconCls : 'common-icon-save',
	          	    	          	                            margin : "0 50 0 0",
	          	    	          	                            listeners:{
	          	    	          	                            	click: 'onSubmitClick'
	          	    	          	                            }
	          	    	          	                        },{
	          	    	          	                            xtype : "button",
	          	    	          	                            text : "导出",
	          	    	          	                            margin : "0 50 0 0",
	          	    	          	                            iconCls : 'nu-export',
	          	    	          	                            listeners:{
	          	    	          	                            	click:'onExportClick'
	          	    	          	                            }
	          	    	          	                        }
	          	    	          	                        ]
	          	    	          	
	          	    }]

	          	}]
	          	/*callcar end*/


	          }
	
	]

});