/*
 * File: app/view/role/RoleMangerPanel.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 5.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 5.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Evcorp.view.callcar.callCarEfficiency', {
	extend : 'Ext.panel.Panel',
	alias : 'widget.callCarEfficiency',
	requires : [ 
		        'Evcorp.view.callcar.callCarEfficiencyViewController',
				'Evcorp.view.callcar.callCarEfficiencyViewModel',
				'Ext.grid.Panel', 'Ext.tab.Panel', 'Ext.grid.column.Column',
				'Ext.grid.View', 'Ext.toolbar.Toolbar', 'Ext.button.Button',
				'Ext.toolbar.Fill', 'Ext.form.Panel', 'Ext.form.field.ComboBox',
				'Ext.form.DateField'
				],
	controller : 'callCarEfficiency',
	viewModel : {
		type : 'callCarEfficiency'
	},
	itemId:'callCarEfficiency',
	referenceHolder: true,
	closable: true,
	autoScroll: true,
	height:'100%',
	items: [{
		xtype: 'gridpanel',
		bind:'{CallCarDemandEfficiencyReportStore}',
		viewConfig: { enableTextSelection: true },
		reference:'reportGrid',
		columns: [{
			text: 'Call车执行单号',
			dataIndex: 'code',
			align: 'center',
			width:120
		}, {
			text: '厂商',
			dataIndex: 'venderName',
			align: 'center',
			width:220
		}, {
			text: 'Call车专员',
			dataIndex: 'creator',
			align: 'center'
		}, {
			text: '提交日期',
			dataIndex: 'submitDate',
			align: 'center',
			width:180,
			renderer: function(value) {
				if(value == null) {
					return "";
				} else {
					return Ext.Date.format(new Date(value), 'Y-m-d H:i:s');
				}
			}
		}, {
			text:'数量',
			dataIndex:'orderQuantity',
			align: 'center'
		}, {
			text:'金额',
			dataIndex:'orderAmount',
			align: 'center',
		}, {
			text: '当前进度',
			dataIndex: 'taskName',
			align: 'center'
		}, {
			text: '店长审批时长',
			dataIndex: 'storeDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.storeWaitDuration!=null)
					return "等待"+record.data.storeWaitDuration;
				else
					return '-';
			}
		}, {
			text: '总监审批时长',
			dataIndex: 'csoDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.csoWaitDuration!=null)
					return "等待"+record.data.csoWaitDuration;
				else
					return '-';
			}
		}, {
			text: '财务审批时长',
			dataIndex: 'financeDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.financeWaitDuration!=null)
					return "等待"+record.data.financeWaitDuration;
				else
					return '-';
			}
		}, {
			text: 'COO审批时长',
			dataIndex: 'cooDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.cooWaitDuration!=null)
					return "等待"+record.data.cooWaitDuration;
				else
					return '-';
			}
		}, {
			text: 'CEO审批时长',
			dataIndex: 'ceoDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.ceoWaitDuration!=null)
					return "等待"+record.data.ceoWaitDuration;
				else
					return '-';
			}
		}, {
			text: '付款时长',
			dataIndex: 'tellerDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.tellerWaitDuration!=null)
					return "等待"+record.data.tellerWaitDuration;
				else
					return '-';
			}
		}, {
			text: '向厂商提交申请时长',
			dataIndex: 'submitApplyDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.submitApplyWaitDuration!=null)
					return "等待"+record.data.submitApplyWaitDuration;
				else
					return '-';
			}
		}, {
			text: '下单到发货时长',
			dataIndex: 'deliveryDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.deliveryWaitDuration!=null)
					return "等待"+record.data.deliveryWaitDuration;
				else
					return '-';
			}
		}, {
			text: '送货时长',
			dataIndex: 'arriveDuration',
			align: 'center',
			renderer: function(value,cellmeta,record) {
				if(value!=null)
					return value;
				else if(record.data.arriveWaitDuration!=null)
					return "等待"+record.data.arriveWaitDuration;
				else
					return '-';
			}
		}, {
			text: '合计（时）',
			dataIndex: 'totalDuration',
			align: 'center',
		}]
	}],
	dockedItems: [{
   	 xtype: 'toolbar',
   	 dock: 'top',
   	 items: [
   	         {
   	  		xtype: 'form',
   			layout: 'hbox',
   			reference:'searchForm',
   			border:false,
   			items: [{
   				xtype: 'datefield',
   				fieldLabel: '提交日期',
   				name: 'submitDateFrom',
   				labelWidth: 70,
   				width: 200,
   				editable:false,
   				format: 'Y-m-d',
   				margin: '10 20 10 0',
   				value : Ext.util.Format.date(new Date(), "Y-m-") + '01'
   			}, {
   				xtype: 'datefield',
   				fieldLabel: '至',
   				name: 'submitDateTo',
   				labelWidth: 40,
   				width: 200,
   				editable:false,
   				format: 'Y-m-d',
   				margin: '10 20 10 0',
   				value : Ext.util.Format.date(new Date(), "Y-m-d")
   			}, {
   	              xtype : 'combobox',
   	                fieldLabel : '订单状态',
   	                name : 'status',
   	                valueField : "code",
   					displayField : "nameCn",
   	                labelWidth : 70,
   	                width : 200,
   	                margin: '10 20 10 0',
   	                mode : 'local ',
   	                editable : false,
   	                store : Ext.create('Ext.data.Store',{
   						fields : [
   								'code',
   								'nameCn' ],
   						proxy : {
   							type : 'direct',
   							directFn : chooseOptionContro.getChooseOptionWithSelect,
   							extraParams : {
   								type : 'callCarStatus'
   							}
   						}
   					})
   	            }]
   	         },
   	         {
   	        	 xtype: 'button',
   	        	 text: '查询',
   	        	 iconCls: 'common-icon-serach',
   	        	 handler: 'onQueryClick'
   	         }
   	        ]
    }]
});
